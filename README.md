# Spring-Boot-Community-Web

# 스프링 부트 시큐리티 + OAuth2

---

스프링 부트 시큐리티에서 가장 중요한 개념은 **인증**과 **권한 부여** 이다.

> 인증

사용자가 어플리케이션의 특정 동작에 관하여 허락된 사용지인지 확인하는 절차 ex) 로그인

> 권한 부여

데이터나 프로그램 등의 특정 자원이나 서비스에 접근할 수 있는 권한을 허용하는 것

> OAuth2

인증 방식 중에 하나로 소셜 미디어를 사용해 편리하게 인증하는 방식이다.

토큰을 사용한 범용적인 방법의 인증을 제공하는 표준 인증 프로토콜이다.

## OAuth2가 제공하는 승인 타입 4가지

1. **권한 부여 코드 승인 타입** 
2. 암시적 승인 타입
3. 리소스 소유자 암호 자격 증명 승인 타입
4. 클라이언트 자격 증명 승인 타입

> 권한 부여 코드 승인 타입

클라이언트가 다른 사용자 대신 특정 리소스에 접근을 요청할 때 사용된다. 리소스 접근을 위한 사용자명과 비밀번호, 권한 서버에 요청해서 받은 권한 코드를 함께 활용하여 리소스에 대한 액세스 토큰을 받으면 이를 인증에 이용하는 방식이다.

---

 권한 부여 코드 승인 타입 순서

1. 브라우저가 권한 부여 코드 요청
2. 사용자 로그인
3. 권한 부여 코드 응답
4. 액세스 토큰으로 교환 요청
5. 액세스 토큰 응답
6. 액세스 토큰을 사용하여 API 호출
7. 요청한 데이터 응답

클라이언트가 파라미터로 클라이언트 ID, 리다이렉트 URI, 응답 타입을 code로 지정하여 권한 서버에 전달합니다. 정상적으로 인증이 되면 권한 부여 코드를 클라이언트에 보냅니다.(응답 타입은 code, token이 사용 가능합니다. 응답 타입이 token일 때가 암시적 승인 타입에 해당함)

성공적으로 권한 부여를 받은 클라이언트는 권한 부여 코들르 사용하여 액세스 토큰을 권한 서버에 추가로 요청합니다. 이때 필요한 파라미터는 클라이언트 아이디, 비밀번호, 리다이렉트 URI, 인증 타입이다.

마지막으로 응답 받은 액세스 토큰을 사용하여 리소스 서버에 사용자의 데이터를 요청합니다.

![image](https://user-images.githubusercontent.com/37995817/125646778-7ab262da-e174-476f-bd80-2cfe8bcb9f7f.png)
